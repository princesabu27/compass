(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const d="http://localhost:3030",e={loginForm:document.getElementById("loginForm"),username:document.getElementById("usernameInput"),password:document.getElementById("passwordInput"),errorMessage:document.getElementById("error"),loginButton:document.getElementById("loginButton")};function u(){e.loginButton.disabled=!1,e.loginButton.textContent="Login",e.loginButton.className=" w-[250px] bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",e.loginButton.setAttribute("aria-disabled","false")}function g(o){try{return new URL(o),!0}catch{return!1}}function c(o){e.errorMessage.textContent=o,e.errorMessage.classList.remove("error-hidden"),e.errorMessage.classList.add("error-visible")}function f(){e.errorMessage.textContent="",e.errorMessage.classList.remove("error-visible"),e.errorMessage.classList.add("error-hidden")}async function m(o){if(o.preventDefault(),!e.loginForm||!e.username||!e.password||!e.errorMessage||!e.loginButton){console.error("One or more DOM elements not found");return}const n=e.username.value.trim(),s=e.password.value.trim();if(!/^[a-zA-Z0-9]{6,12}$/.test(n)){c("Username must be 6â€“12 alphanumeric characters");return}const l=/^(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9!@#$%^&*\-_+=]{6,15}$/;if(!l.test(s)){console.log("Password validation failed:",s,l.test(s)),c("Wrong password");return}f(),e.loginButton.disabled=!0,e.loginButton.textContent="Logging in...",e.loginButton.className=" w-[250px] bg-blue-300 text-black py-2 px-4 rounded-md cursor-not-allowed opacity-50",e.loginButton.setAttribute("aria-disabled","true");try{const t=new AbortController,r=setTimeout(()=>t.abort(),2e4),i=await fetch(`${d}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:s}),signal:t.signal,credentials:"include"});clearTimeout(r);const a=await i.json();if(!i.ok)throw new Error(a.errorMessage||"Login failed");if(a.redirectUrl&&g(a.redirectUrl))window.location.href=a.redirectUrl;else throw new Error("Invalid redirect URL")}catch(t){c(t.message||"An error occurred"),u()}}function p(){e.loginForm?e.loginForm.addEventListener("submit",m):console.error("Login form not found")}document.addEventListener("DOMContentLoaded",p);
